{
  "meta": {
    "project": "GNSS/IMU原始数据读写与时序同步处理平台",
    "type": "本科毕业设计",
    "core_problem": "解决IMU高频与GNSS低频数据的时序对齐和插值问题",
    "additional_requirement": "提供Web前端界面进行数据上传、解析和可视化（增加复杂度）",
    "data_context": {
      "imu_frequency": "200Hz（附录1 com15.txt混合帧）",
      "gnss_frequency": "1Hz（附录1 com16.txt或3_NavigationResultGNSS.dat）",
      "file_size_estimate": "IMU约18MB，GNSS约3MB，解算结果约300MB",
      "data_location": "/Users/jasxu/Documents/gnss-imu-sync-platform/data/"
    }
  },
  "features": {
    "F1_data_io": {
      "name": "数据文件读取模块",
      "core": "读取异构的GNSS和IMU日志文件，解析十六进制和文本格式",
      "sub_features": {
        "F1.1_hex_parser": {
          "name": "十六进制数据解析",
          "description": "解析附录1格式的混合帧（GNSS+INS），处理低字节序",
          "requirements": [
            "解析帧头 0x9966（GNSS）和 0x55ca（INS）",
            "提取时间戳（年月日时分+微秒）",
            "提取GNSS数据（经纬高、三轴速度）",
            "提取IMU数据（三轴陀螺仪、三轴加速度）",
            "校验和验证",
            "边界条件：帧不完整/校验失败时跳过并记录",
            "边界条件：卫导无效时仅解析INS帧（0x55ca）",
            "边界条件：时间戳非法（如年份<2000或>2100）时告警",
            "边界条件：处理文件尾部不足一帧的数据"
          ],
          "finished": false
        },
        "F1.2_result_parser": {
          "name": "解算结果数据解析",
          "description": "解析附录2格式的组合导航结果（3_NavigationResult*.dat）",
          "requirements": [
            "提取时间戳",
            "提取组合导航信息（经纬高、速度、姿态）",
            "提取纯惯导信息",
            "识别导航状态（纯惯/松组合/对准/待机）",
            "边界条件：处理帧序号0-199循环（可能用于数据分段）",
            "边界条件：文件大小约300MB，需流式读取或分块处理",
            "边界条件：导航状态异常值时的容错处理"
          ],
          "finished": false
        },
        "F1.3_data_structure": {
          "name": "统一数据结构设计",
          "description": "设计统一的内存数据结构存储异构数据",
          "requirements": [
            "IMU数据结构（时间戳+角增量+速度增量）",
            "GNSS数据结构（时间戳+位置+速度）",
            "高效索引机制（基于时间戳）",
            "关键设计：IMU 200Hz 对应每秒200条，GNSS 1Hz对应每秒1条，数据量级差异200倍",
            "边界条件：空数据文件处理（文件大小为0或无有效帧）",
            "边界条件：内存占用估算（IMU 18MB文件约90万条，内存需求约100MB）",
            "边界条件：时间戳乱序时的检测和处理策略（告警或重新排序）"
          ],
          "finished": false
        },
        "F1.4_file_format_detection": {
          "name": "文件格式自动识别",
          "description": "根据文件名或内容自动识别数据类型",
          "requirements": [
            "识别com15.txt（混合帧GNSS+INS）",
            "识别com16.txt（纯GNSS）",
            "识别3_NavigationResult*.dat（解算结果）",
            "根据帧头0x9966/0x55ca自动判断格式",
            "文件格式错误时给出清晰错误提示"
          ],
          "finished": false
        }
      },
      "finished": false
    },
    "F2_time_sync": {
      "name": "时序同步算法",
      "core": "实现GNSS和IMU数据的时戳对齐机制",
      "sub_features": {
        "F2.1_timestamp_align": {
          "name": "时戳对齐算法",
          "description": "查找最邻近IMU数据的GNSS时戳",
          "requirements": [
            "时间戳统一转换（转为秒或微秒）",
            "最邻近搜索算法（二分查找或线性扫描）",
            "时戳漂移检测和告警",
            "边界条件：GNSS数据时间范围不完全覆盖IMU时的处理",
            "边界条件：IMU首尾时刻没有对应GNSS数据时的插值策略",
            "边界条件：时间戳精度问题（微秒级对齐 vs 毫秒级误差）",
            "边界条件：时间戳反向跳变检测（如GPS周跳）"
          ],
          "finished": false
        },
        "F2.2_sync_validation": {
          "name": "同步精度验证",
          "description": "验证对齐后的时戳误差",
          "requirements": [
            "计算最大时戳误差",
            "统计平均时戳偏差",
            "输出对齐质量报告",
            "边界条件：无法对齐时的失败反馈（如GNSS数据全部无效）",
            "关键指标：200Hz IMU期望对齐误差<5ms（1/200s = 5ms）"
          ],
          "finished": false
        }
      },
      "finished": false
    },
    "F3_gnss_interpolation": {
      "name": "GNSS观测数据插值",
      "core": "生成与IMU频率一致的GNSS高频伪观测量",
      "sub_features": {
        "F3.1_linear_interp": {
          "name": "线性插值",
          "description": "最简单的分段线性插值",
          "requirements": [
            "位置插值（经纬高）",
            "速度插值（三轴速度）"
          ],
          "finished": false
        },
        "F3.2_poly_interp": {
          "name": "多项式插值",
          "description": "高阶多项式插值（可选）",
          "requirements": [
            "拉格朗日插值实现",
            "边界条件处理"
          ],
          "finished": false
        },
        "F3.3_spline_interp": {
          "name": "三次样条插值",
          "description": "推荐方法，平滑且无震荡",
          "requirements": [
            "三次样条数学模型推导",
            "自然边界条件或周期边界条件",
            "位置和速度插值"
          ],
          "finished": false
        },
        "F3.4_high_freq_output": {
          "name": "高频伪观测量生成",
          "description": "按IMU频率生成GNSS插值数据",
          "requirements": [
            "与IMU时戳严格对齐",
            "输出统一数据接口",
            "插值质量标记（原始点/插值点）",
            "边界条件：GNSS数据点<2时无法插值，直接失败",
            "边界条件：插值区间外的IMU时戳使用外推或标记为无效",
            "边界条件：插值方法失败时的降级策略（样条失败→多项式→线性）",
            "关键指标：1Hz GNSS插值到200Hz，每两个GNSS点之间生成199个插值点"
          ],
          "finished": false
        }
      },
      "finished": false
    },
    "F4_visualization": {
      "name": "数据验证与可视化（命令行/本地）",
      "core": "通过图表验证平台的稳定性和正确性（使用matplotlib/plotly生成本地图片）",
      "note": "与F6.3的区别：F4是命令行工具生成图片文件，F6.3是Web前端动态交互图表",
      "sub_features": {
        "F4.1_timestamp_plot": {
          "name": "时戳对比图",
          "description": "验证GNSS插值后与IMU的同步精度",
          "requirements": [
            "绘制IMU时戳序列",
            "绘制GNSS原始时戳和插值时戳",
            "标注时戳偏差"
          ],
          "finished": false
        },
        "F4.2_imu_plot": {
          "name": "IMU数据曲线",
          "description": "绘制加速度和角速度曲线",
          "requirements": [
            "三轴加速度曲线",
            "三轴角速度曲线",
            "时间轴对齐"
          ],
          "finished": false
        },
        "F4.3_gnss_trajectory": {
          "name": "GNSS轨迹可视化",
          "description": "绘制插值前后的GNSS轨迹",
          "requirements": [
            "原始GNSS轨迹（散点）",
            "插值后GNSS轨迹（平滑曲线）",
            "二维或三维可视化"
          ],
          "finished": false
        }
      },
      "finished": false
    },
    "F5_platform_integration": {
      "name": "平台整合与接口",
      "core": "将各模块整合为统一的数据预处理平台",
      "sub_features": {
        "F5.1_pipeline": {
          "name": "数据处理管线",
          "description": "从读取到输出的完整流程",
          "requirements": [
            "数据加载 → 解析 → 对齐 → 插值 → 输出",
            "错误处理和异常回滚",
            "日志记录"
          ],
          "finished": false
        },
        "F5.2_unified_api": {
          "name": "统一数据接口",
          "description": "为后续组合导航算法提供标准接口",
          "requirements": [
            "同步数据获取接口",
            "时间范围查询接口",
            "数据质量标记"
          ],
          "finished": false
        },
        "F5.3_config": {
          "name": "配置管理",
          "description": "支持参数化配置",
          "requirements": [
            "插值方法选择（线性/样条）",
            "时间对齐容差",
            "输出频率设定"
          ],
          "finished": false
        }
      },
      "finished": false
    },
    "F6_web_frontend": {
      "name": "Web前端与后端API",
      "core": "提供Web界面进行数据上传、解析触发和结果可视化",
      "sub_features": {
        "F6.1_backend_api": {
          "name": "后端REST API",
          "description": "提供数据上传、解析任务管理和结果获取的HTTP接口",
          "requirements": [
            "POST /upload - 上传IMU/GNSS数据文件",
            "POST /parse - 触发数据解析任务",
            "GET /status/{task_id} - 查询解析任务状态",
            "GET /result/{task_id} - 获取解析结果（JSON格式）",
            "GET /plot/{task_id}/{plot_type} - 获取图表数据或图片",
            "文件存储管理（上传文件暂存）",
            "异步任务队列（处理耗时解析任务）",
            "错误处理和异常返回",
            "边界条件：文件大小限制（建议100MB，防止内存溢出）",
            "边界条件：文件类型验证（仅允许.txt/.dat等预期格式）",
            "边界条件：并发任务数限制（建议最多5个并发解析任务）",
            "边界条件：任务超时处理（解析超过5分钟自动终止）",
            "边界条件：磁盘空间检查（上传前检查剩余空间）",
            "边界条件：任务ID冲突处理（使用UUID）"
          ],
          "finished": false
        },
        "F6.2_frontend_ui": {
          "name": "前端Web界面",
          "description": "用户友好的数据上传和结果展示界面",
          "requirements": [
            "文件上传组件（支持拖拽上传）",
            "解析配置面板（选择插值方法、对齐参数等）",
            "解析按钮和进度显示",
            "结果展示区域（同步质量报告）",
            "图表展示区域（时戳对比、IMU曲线、GNSS轨迹）",
            "响应式布局（适配桌面浏览器）"
          ],
          "finished": false
        },
        "F6.3_chart_integration": {
          "name": "前端图表集成",
          "description": "使用图表库展示数据可视化结果",
          "requirements": [
            "时戳对比图（折线图）",
            "IMU三轴加速度/角速度图（多条折线）",
            "GNSS轨迹图（散点+平滑曲线，可能是地图投影）",
            "支持图表交互（缩放、悬停显示数据点）",
            "图表导出功能（PNG/SVG）"
          ],
          "finished": false
        },
        "F6.4_data_management": {
          "name": "数据文件管理",
          "description": "管理上传的文件和解析结果",
          "requirements": [
            "历史任务列表",
            "文件删除功能",
            "结果数据下载（处理后的同步数据导出）",
            "磁盘空间管理（自动清理过期文件）"
          ],
          "finished": false
        },
        "F6.5_tech_stack": {
          "name": "技术栈选型",
          "description": "明确前后端技术选型",
          "options": {
            "backend": [
              "Python Flask/FastAPI（推荐，与数据处理同语言）",
              "Node.js Express（前后端统一语言）"
            ],
            "frontend": [
              "React + ECharts/Plotly（推荐，图表能力强）",
              "Vue + Chart.js（轻量级）",
              "纯HTML+JS+ECharts（最简单，无构建工具）"
            ],
            "task_queue": [
              "Celery + Redis（Python生态，适合重任务）",
              "简单线程池（本科毕设够用）"
            ]
          },
          "finished": false
        }
      },
      "finished": false
    }
  },
  "implementation_plan": {
    "recommended_order": [
      "1. F1_data_io - 数据读取是基础，必须先做",
      "2. F2_time_sync - 有了数据才能对齐",
      "3. F3_gnss_interpolation - 对齐后才能插值",
      "4. F4_visualization - 验证前面三步是否正确",
      "5. F5_platform_integration - 整合成完整管线",
      "6. F6_web_frontend - 最后包装成Web界面"
    ],
    "milestone_verification": {
      "M1_data_parsing": "读取data目录下所有文件，输出解析后的IMU/GNSS数据条数",
      "M2_time_alignment": "输出对齐质量报告（最大误差、平均误差）",
      "M3_interpolation": "输出插值前后GNSS数据点数对比（1Hz→200Hz）",
      "M4_visualization": "生成三张图（时戳对比图、IMU曲线图、GNSS轨迹图）",
      "M5_cli_tool": "命令行工具能跑通完整流程（python main.py --input data/）",
      "M6_web_demo": "Web界面能上传文件、触发解析、显示图表"
    }
  },
  "risk_assessment": {
    "critical_risks": [
      "【致命】低字节序解析错误 → 数值爆炸，整个系统崩溃",
      "【致命】GNSS数据点<2 → 插值失败，无法生成高频数据",
      "【致命】时间戳乱序或缺失 → 对齐算法崩溃"
    ],
    "major_risks": [
      "【重要】插值方法选择不当 → 轨迹震荡或不平滑",
      "【重要】大文件（300MB）内存溢出 → 需要流式处理",
      "【重要】Web并发任务无限制 → 服务器资源耗尽"
    ],
    "minor_risks": [
      "【次要】图表库选型不当 → 前端性能差",
      "【次要】任务队列复杂度过高 → 开发周期延长",
      "【次要】文件上传UI不友好 → 用户体验差"
    ]
  }
}
